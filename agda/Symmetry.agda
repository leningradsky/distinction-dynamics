{-# OPTIONS --safe --without-K #-}

{-
  SYMMETRY - Группы симметрий
  ============================
  
  S₃, циклические группы, связь с триадой.
-}

module Symmetry where

open import Base

------------------------------------------------------------------------
-- ПЕРЕСТАНОВКИ НА ТРЁХ
------------------------------------------------------------------------

data Three : Set where
  t1 : Three
  t2 : Three
  t3 : Three

-- S₃ как функции Three → Three
S3 : Set
S3 = Three -> Three

-- Тождество
e : S3
e x = x

-- Циклическая перестановка (123) -> (231)
r : S3
r t1 = t2
r t2 = t3
r t3 = t1

-- Обратная: (123) -> (312)
r-inv : S3
r-inv t1 = t3
r-inv t2 = t1
r-inv t3 = t2

-- Транспозиция (12)
s12 : S3
s12 t1 = t2
s12 t2 = t1
s12 t3 = t3

-- Транспозиция (13)
s13 : S3
s13 t1 = t3
s13 t2 = t2
s13 t3 = t1

-- Транспозиция (23)
s23 : S3
s23 t1 = t1
s23 t2 = t3
s23 t3 = t2

------------------------------------------------------------------------
-- КОМПОЗИЦИЯ
------------------------------------------------------------------------

comp : S3 -> S3 -> S3
comp f g x = f (g x)

------------------------------------------------------------------------
-- ПОРЯДОК ЭЛЕМЕНТА
------------------------------------------------------------------------

-- r имеет порядок 3
r3=e : (x : Three) -> comp r (comp r r) x == e x
r3=e t1 = refl
r3=e t2 = refl
r3=e t3 = refl

-- Транспозиции имеют порядок 2
s12-2=e : (x : Three) -> comp s12 s12 x == e x
s12-2=e t1 = refl
s12-2=e t2 = refl
s12-2=e t3 = refl

------------------------------------------------------------------------
-- A₃ (ЧЁТНЫЕ ПЕРЕСТАНОВКИ)
------------------------------------------------------------------------

-- A₃ = {e, r, r²}
-- Это циклическая группа Z₃
-- det = 1 для всех элементов

data A3 : Set where
  a-e : A3      -- тождество
  a-r : A3      -- один цикл
  a-r2 : A3     -- два цикла

A3-to-S3 : A3 -> S3
A3-to-S3 a-e = e
A3-to-S3 a-r = r
A3-to-S3 a-r2 = comp r r

------------------------------------------------------------------------
-- СВЯЗЬ С SU(3)
------------------------------------------------------------------------

-- A₃ ⊂ SU(3) (det = 1)
-- S₃ = A₃ ⋊ Z₂ (полупрямое произведение)
-- Z₂ = отражения (det = -1)

-- SU(3) — минимальная группа содержащая A₃
-- как непрерывная группа Ли

------------------------------------------------------------------------
-- СВЯЗЬ С ТРИАДОЙ
------------------------------------------------------------------------

-- Триада {A, B, C} допускает перестановки
-- Перестановки образуют S₃
-- S₃ порождается r (порядок 3) и s (порядок 2)

-- Минимальная группа для триады = S₃
-- Непрерывное расширение = SU(3)
