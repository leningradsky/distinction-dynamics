{-# OPTIONS --safe --without-K #-}

{-
  RESOURCE - Ресурс и его распределение
  ======================================
  
  R = C + O (на уровне)
  R = D + A (между уровнями)
-}

module Resource where

open import Base

------------------------------------------------------------------------
-- РЕСУРС
------------------------------------------------------------------------

-- Ресурс — это то, что распределяется между:
-- - Closure и Openness (на уровне)
-- - Dimension и Asymmetry (между уровнями)
-- - Interior и Exterior (через Boundary)

record Resource : Set where
  field
    total : Nat
    
------------------------------------------------------------------------
-- РАСПРЕДЕЛЕНИЕ НА УРОВНЕ
------------------------------------------------------------------------

record LevelDistribution : Set where
  field
    resource : Nat
    closure : Nat      -- Interior + Boundary
    openness : Nat     -- Exterior
    balanced : closure +N openness == resource

------------------------------------------------------------------------
-- РАСПРЕДЕЛЕНИЕ МЕЖДУ УРОВНЯМИ
------------------------------------------------------------------------

record HierarchyDistribution : Set where
  field
    resource : Nat
    dimension : Nat    -- степени свободы
    asymmetry : Nat    -- отделённость
    balanced : dimension +N asymmetry == resource

------------------------------------------------------------------------
-- ЭКВИВАЛЕНТНОСТЬ
------------------------------------------------------------------------

-- Closure ~ Asymmetry (замкнутость = отделённость)
-- Openness ~ Dimension (открытость = свобода)

-- Два описания одного принципа

------------------------------------------------------------------------
-- ОПТИМИЗАЦИЯ
------------------------------------------------------------------------

-- Нельзя максимизировать оба одновременно
-- Trade-off: больше одного = меньше другого

-- Развитие = перераспределение при фиксированном total

data Direction-of-Development : Set where
  toward-closure : Direction-of-Development   -- стабилизация
  toward-openness : Direction-of-Development  -- рост

------------------------------------------------------------------------
-- КРАЙНИЕ СЛУЧАИ
------------------------------------------------------------------------

-- Closure = total, Openness = 0
-- Полностью замкнутая система
-- Максимальная стабильность, нет роста
-- Пример: чёрная дыра? изолированная частица?

-- Closure = 0, Openness = total  
-- Полностью открытая система
-- Нет стабильности, максимальная связность
-- Пример: рефлексия (asym = 0)

------------------------------------------------------------------------
-- РАВНОВЕСИЕ
------------------------------------------------------------------------

-- Устойчивые системы: C и O оба > 0
-- Минимумы:
--   C >= 3 (триада для замыкания)
--   O >= 1 (канал для роста)

MinClosure : Nat
MinClosure = 3

MinOpenness : Nat
MinOpenness = 1

MinResource : Nat
MinResource = 4  -- 3 + 1

------------------------------------------------------------------------
-- ПОЧЕМУ R = 5?
------------------------------------------------------------------------

-- Наблюдаем: D + A = 5 для уровней L0-L5
-- Откуда 5?

-- Гипотеза 1: Число уровней (0,1,2,3,4,5 = 6, но индексация с 0)
-- Гипотеза 2: 3 (пространство) + 1 (время) + 1 (рефлексия)?
-- Гипотеза 3: Минимум для полного цикла?

-- Пока не выводим, констатируем.

------------------------------------------------------------------------
-- ФОРМУЛА
------------------------------------------------------------------------

-- Универсальный закон:
-- Closure + Openness = Resource
-- 
-- Разные имена в разных контекстах:
-- | Контекст | Closure | Openness | Resource |
-- |----------|---------|----------|----------|
-- | Зоны | Interior | Exterior | Total |
-- | Уровни | Asymmetry | Dimension | 5 |
-- | Система | Stability | Freedom | Budget |
-- | Физика | SU(3) | U(1) | SM |
